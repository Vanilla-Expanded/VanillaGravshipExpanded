<?xml version="1.0" encoding="utf-8" ?>
<Defs>
    <ThingDef Name="VGE_MechStructureBase" ParentName="BuildingBase" Abstract="True">
        <altitudeLayer>Building</altitudeLayer>
        <tradeability>None</tradeability>
        <building>
            <ai_combatDangerous>true</ai_combatDangerous>
            <claimable>false</claimable>
            <deconstructible>false</deconstructible>
            <repairable>false</repairable>
        </building>
        <comps>
            <li Class="VanillaGravshipExpanded.CompProperties_AssignMechFaction" />
        </comps>
    </ThingDef>

    <ThingDef Name="VGE_MechTurretBase" ParentName="VGE_MechStructureBase" Abstract="True">
        <drawerType>MapMeshAndRealTime</drawerType>
        <thingClass>Building_TurretGun</thingClass>
        <drawHighlight>true</drawHighlight>
        <drawHighlightOnlyForHostile>true</drawHighlightOnlyForHostile>
        <receivesSignals>true</receivesSignals>
        <hasTooltip>true</hasTooltip>
        <stealable>false</stealable>
        <rotatable>false</rotatable>
        <fillPercent>0.6</fillPercent>
        <tickerType>Normal</tickerType>
        <comps>
            <li Class="CompProperties_CanBeDormant">
                <compClass>CompMechanoid</compClass>
            </li>
            <li Class="CompProperties_WakeUpDormant">
                <wakeUpSound>MechanoidsWakeUp</wakeUpSound>
            </li>
            <li Class="CompProperties_Stunnable">
                <affectedDamageDefs>
                    <li>Stun</li>
                    <li>EMP</li>
                </affectedDamageDefs>
                <adaptableDamageDefs>
                    <li>EMP</li>
                </adaptableDamageDefs>
            </li>
        </comps>
        <placeWorkers>
            <li>PlaceWorker_TurretTop</li>
        </placeWorkers>
    </ThingDef>

    <ThingDef ParentName="VGE_MechTurretBase">
        <defName>VGE_MassDriver</defName>
        <label>mass driver</label>
        <description>A triple-barrel electromagnetic artillery system built into mechanoid defense platforms. It fires dense slugs at incredible velocities, tearing through both armored gravships in orbit and ground targets with equal ease. The weapon is fully autonomous, operated by a machine brain that requires no crew. Commonly seen on orbital bombardment platforms.</description>
        <uiIconPath>Things/Structures/Artillery/MechanoidMassDriver_MenuIcon</uiIconPath>
        <thingClass>VanillaGravshipExpanded.Building_EnemyMechTurret</thingClass>
        <graphicData>
            <graphicClass>Graphic_Single</graphicClass>
            <texPath>Things/Structures/Artillery/MechanoidOrbitalArtillery_Base_Normal</texPath>
            <drawSize>(5,5)</drawSize>
        </graphicData>
        <statBases>
            <MaxHitPoints>1400</MaxHitPoints>
            <Flammability>0</Flammability>
            <Beauty>-40</Beauty>
        </statBases>
        <size>(5,5)</size>
        <passability>Impassable</passability>
        <building>
            <turretGunDef>VGE_Gun_MassDriver</turretGunDef>
            <turretBurstCooldownTime>60</turretBurstCooldownTime>
            <turretTopDrawSize>7</turretTopDrawSize>
            <playTargetAcquiredSound>false</playTargetAcquiredSound>
            <combatPower>150</combatPower>
            <turretBurstWarmupTime>8.33</turretBurstWarmupTime>
        </building>
        <modExtensions>
            <li Class="VanillaGravshipExpanded.TurretExtension_RotationSpeed">
                <rotationSpeed>15</rotationSpeed>
            </li>
            <li Class="VanillaGravshipExpanded.TurretExtension_Barrels">
                <barrels>
                    <li>(0.5, 0, 3)</li>
                    <li>(0, 0, 3)</li>
                    <li>(-0.5, 0, 3)</li>
                </barrels>
            </li>
        </modExtensions>
        <comps>
            <li Class="VanillaGravshipExpanded.CompProperties_WorldArtillery">
                <worldMapAttackRange>36</worldMapAttackRange>
                <firingMode>PlanetToSpace, SpaceToSpace, SpaceToPlanet</firingMode>
            </li>
        </comps>
        <killedLeavings>
            <GravlitePanel>30</GravlitePanel>
            <ChunkSlagSteel>5</ChunkSlagSteel>
        </killedLeavings>
    </ThingDef>

    <ThingDef ParentName="BaseWeaponTurret">
        <defName>VGE_Gun_MassDriver</defName>
        <label>mass driver</label>
        <description>A triple-barrel electromagnetic artillery system.</description>
        <graphicData>
            <texPath>Things/Structures/Artillery/MechanoidMassDriver_TurretTop</texPath>
            <graphicClass>Graphic_Single</graphicClass>
        </graphicData>
        <verbs>
            <li>
                <verbClass>VanillaGravshipExpanded.Verb_ShootWithSmoke</verbClass>
                <defaultProjectile>VGE_Bullet_MassDriver</defaultProjectile>
                <range>500</range>
                <minRange>26.0</minRange>
                <burstShotCount>3</burstShotCount>
                <ticksBetweenBurstShots>20</ticksBetweenBurstShots>
                <soundCastTail>GunTail_Heavy</soundCastTail>
                <muzzleFlashScale>14</muzzleFlashScale>
                <forcedMissRadius>9</forcedMissRadius>
                <requireLineOfSight>false</requireLineOfSight>
                <forceNormalTimeSpeed>false</forceNormalTimeSpeed>
                <isMortar>true</isMortar>
                <soundCast>VGE_GravshipHowitzer</soundCast>
                <targetParams>
                    <canTargetLocations>true</canTargetLocations>
                </targetParams>
            </li>
        </verbs>
        <modExtensions>
            <li Class="VanillaGravshipExpanded.TurretExtension_SubstructureDamage">
                <substructureDamageRadius>1.9</substructureDamageRadius>
            </li>
        </modExtensions>
    </ThingDef>

    <ThingDef ParentName="BaseBullet">
        <defName>VGE_Bullet_MassDriver</defName>
        <label>mass driver shot</label>
        <graphicData>
            <texPath>Things/Projectiles/GaussShot_Small</texPath>
            <graphicClass>Graphic_Single</graphicClass>
            <shaderType>TransparentPostLight</shaderType>
        </graphicData>
        <thingClass>VanillaGravshipExpanded.Projectile_Artillery</thingClass>
        <projectile>
            <damageDef>Bomb</damageDef>
            <damageAmountBase>50</damageAmountBase>
            <armorPenetrationBase>0.15</armorPenetrationBase>
            <speed>135</speed>
            <explosionRadius>4.9</explosionRadius>
            <flyOverhead>true</flyOverhead>
            <stoppingPower>2.5</stoppingPower>
            <soundImpact>BulletImpact_Metal</soundImpact>
            <soundHitThickRoof>Artillery_HitThickRoof</soundHitThickRoof>
            <soundExplode>MortarBomb_Explode</soundExplode>
            <soundImpactAnticipate>MortarRound_PreImpact</soundImpactAnticipate>
            <soundAmbient>MortarRound_Ambient</soundAmbient>
        </projectile>
    </ThingDef>

    <ThingDef ParentName="VGE_MechTurretBase">
        <defName>VGE_HeavyChargeAnnihilator</defName>
        <label>heavy charge annihilator</label>
        <description>A heavy pulse-charged weapon, designed for sustained suppressive fire in defense of mechanoid orbital platforms. Its upgraded capacitors and cooling systems allow it to unleash longer, more devastating bursts than standard charge blasters, saturating entire areas with surprisingly accurate shots.</description>
        <uiIconPath>Things/Structures/Artillery/HeavyChargeAnnihilator_MenuIcon</uiIconPath>
        <graphicData>
            <graphicClass>Graphic_Single</graphicClass>
            <texPath>Things/Structures/Artillery/MechanoidOrbitalArtillery_Base_Small</texPath>
            <drawSize>(3,3)</drawSize>
        </graphicData>
        <statBases>
            <MaxHitPoints>500</MaxHitPoints>
            <Flammability>0</Flammability>
            <Beauty>-20</Beauty>
        </statBases>
        <size>(3,3)</size>
        <passability>PassThroughOnly</passability>
        <pathCost>30</pathCost>
        <building>
            <turretGunDef>VGE_Gun_HeavyChargeAnnihilator</turretGunDef>
            <turretBurstCooldownTime>20</turretBurstCooldownTime>
            <turretTopDrawSize>5</turretTopDrawSize>
            <combatPower>150</combatPower>
        </building>
    </ThingDef>

    <ThingDef ParentName="BaseWeaponTurret">
        <defName>VGE_Gun_HeavyChargeAnnihilator</defName>
        <label>heavy charge annihilator</label>
        <description>A heavy pulse-charged weapon for mechanoid defense.</description>
        <graphicData>
            <texPath>Things/Structures/Artillery/HeavyChargeAnnihilator_TurretTop</texPath>
            <graphicClass>Graphic_Single</graphicClass>
        </graphicData>
        <statBases>
            <AccuracyTouch>0.24</AccuracyTouch>
            <AccuracyShort>0.32</AccuracyShort>
            <AccuracyMedium>0.40</AccuracyMedium>
            <AccuracyLong>0.34</AccuracyLong>
        </statBases>
        <verbs>
            <li>
                <verbClass>Verb_Shoot</verbClass>
                <defaultProjectile>Bullet_ChargeBlasterHeavy</defaultProjectile>
                <warmupTime>60</warmupTime>
                <range>36</range>
                <burstShotCount>36</burstShotCount>
                <ticksBetweenBurstShots>4</ticksBetweenBurstShots>
                <soundCast>Shot_ChargeBlaster</soundCast>
                <soundCastTail>GunTail_Heavy</soundCastTail>
                <muzzleFlashScale>12</muzzleFlashScale>
                <requireLineOfSight>false</requireLineOfSight>
                <targetParams>
                    <canTargetLocations>true</canTargetLocations>
                </targetParams>
            </li>
        </verbs>
    </ThingDef>
    <ThingDef ParentName="VGE_MechStructureBase">
        <defName>VGE_MechanoidGravEngine</defName>
        <label>mechanoid grav engine</label>
        <description>The cold, artificial heart of a mechanoid orbital platform. Unlike human-built grav engines, these are constructed by the mechanoid core itself, optimized for ruthless efficiency and unending operation. They generate immense lift and stabilization fields that allow entire platforms to remain suspended in orbit, forming the backbone of mechanoid dominance in space. While largely incompatible with human systems and not usable for gravship construction, they can be destroyed to yield a gravcore, a rare and valuable prize for any who dare to challenge them.</description>
        <thingClass>VanillaGravshipExpanded.Building_MechanoidGravEngine</thingClass>
        <drawerType>MapMeshAndRealTime</drawerType>
        <rotatable>false</rotatable>
        <graphicData>
            <graphicClass>Graphic_Single</graphicClass>
            <texPath>Things/Structures/MechanoidStructures/MechanoidGravEngine/MechanoidGravEgnine</texPath>
            <drawSize>(3,3)</drawSize>
            <addTopAltitudeBias>true</addTopAltitudeBias>
        </graphicData>
        <uiIconPath>Things/Structures/MechanoidStructures/MechanoidGravEngine/MechanoidGravEngine_MenuIcon</uiIconPath>
        <statBases>
            <MaxHitPoints>1000</MaxHitPoints>
            <Beauty>0</Beauty>
            <Flammability>0</Flammability>
        </statBases>
        <size>(3,3)</size>
        <passability>PassThroughOnly</passability>
        <pathCost>20</pathCost>
        <fillPercent>0.6</fillPercent>
        <killedLeavings>
            <Gravcore>1</Gravcore>
            <GravlitePanel>30</GravlitePanel>
            <ComponentSpacer>2</ComponentSpacer>
            <Plasteel>20</Plasteel>
        </killedLeavings>
        <comps>
            <li Class="CompProperties_Glower">
                <glowRadius>8</glowRadius>
                <glowColor>(255, 40, 40, 0)</glowColor>
            </li>
        </comps>
        <building>
            <ai_combatDangerous>false</ai_combatDangerous>
        </building>
        <placeWorkers />
    </ThingDef>
    <ThingDef ParentName="VGE_MechStructureBase">
        <defName>VGE_LargeMechanoidThruster</defName>
        <label>large mechanoid thruster</label>
        <description>A massive astrofuel thruster built by the mechanoid core to propel their orbital platforms. Its construction mirrors human design but is reinforced with mechanical precision and efficiency, lined with thick vacstone plating that shrugs off extreme heat and stress. These thrusters allow mechanoid platforms to maneuver and maintain position in orbit. While unusable for human gravships, destroying one will yield a small supply of precious vacstone blocks.</description>
        <graphicData>
            <texPath>Things/Structures/MechanoidStructures/MechanoidLateralThruster/MechanoidLateralThruster</texPath>
            <graphicClass>Graphic_Multi</graphicClass>
            <drawSize>(3, 4)</drawSize>
        </graphicData>
        <statBases>
            <MaxHitPoints>600</MaxHitPoints>
            <Beauty>-10</Beauty>
            <Flammability>0</Flammability>
        </statBases>
        <size>(2,2)</size>
        <rotatable>true</rotatable>
        <passability>PassThroughOnly</passability>
        <pathCost>20</pathCost>
        <fillPercent>0.4</fillPercent>
        <killedLeavings>
            <Steel>40</Steel>
            <BlocksVacstone>30</BlocksVacstone>
            <ComponentSpacer>1</ComponentSpacer>
        </killedLeavings>
        <building>
            <ai_combatDangerous>false</ai_combatDangerous>
        </building>
    </ThingDef>
    <ThingDef ParentName="VGE_MechStructureBase">
        <defName>VGE_MechanoidResourceProcessor</defName>
        <label>resource processor</label>
        <description>A machine-built structure that sustains mechanoid platforms by breaking down cosmic debris and wreckage into usable resources. It operates at regular intervals, steadily producing metals and fuels needed to keep their orbiting strongholds supplied.</description>
        <thingClass>VanillaGravshipExpanded.Building_MechanoidResourceProcessor</thingClass>
        <tickerType>Normal</tickerType>
        <graphicData>
            <texPath>Things/Structures/MechanoidStructures/MechanoidResourceProcessor</texPath>
            <graphicClass>Graphic_Single</graphicClass>
            <drawSize>(3,3)</drawSize>
        </graphicData>
        <statBases>
            <MaxHitPoints>500</MaxHitPoints>
            <Beauty>-10</Beauty>
            <Flammability>0</Flammability>
        </statBases>
        <size>(3,3)</size>
        <rotatable>false</rotatable>
        <passability>PassThroughOnly</passability>
        <pathCost>20</pathCost>
        <fillPercent>0.4</fillPercent>
        <killedLeavings>
            <Steel>60</Steel>
            <ComponentSpacer>2</ComponentSpacer>
        </killedLeavings>
        <building>
            <ai_combatDangerous>false</ai_combatDangerous>
        </building>
    </ThingDef>
    <ThingDef ParentName="VGE_MechStructureBase">
        <defName>VGE_MechanoidPodLauncher</defName>
        <label>mechanoid pod launcher</label>
        <description>A mechanized launch bay that periodically fires drop pods packed with mechanoids. These pods strike distant targets or nearby ships, allowing the platform to project its forces far beyond its hull.</description>
        <tickerType>Normal</tickerType>
        <graphicData>
            <texPath>Things/Structures/MechanoidStructures/MechanoidPodLauncher</texPath>
            <graphicClass>Graphic_Single</graphicClass>
            <drawSize>(3,3)</drawSize>
        </graphicData>
        <statBases>
            <MaxHitPoints>500</MaxHitPoints>
            <Beauty>-10</Beauty>
            <Flammability>0</Flammability>
        </statBases>
        <size>(3,3)</size>
        <rotatable>false</rotatable>
        <passability>PassThroughOnly</passability>
        <pathCost>20</pathCost>
        <fillPercent>0.4</fillPercent>
        <killedLeavings>
            <Steel>80</Steel>
            <ComponentSpacer>3</ComponentSpacer>
        </killedLeavings>
        <comps>
            <li Class="VanillaGravshipExpanded.CompProperties_MechanoidPodLauncher">
                <compClass>VanillaGravshipExpanded.CompMechanoidPodLauncher</compClass>
                <spawnInterval>60000</spawnInterval>
                <spawnCount>4</spawnCount>
                <pawnKinds>
                    <li>Mech_Scyther</li>
                    <li>Mech_Lancer</li>
                    <li>Mech_CentipedeGunner</li>
                    <li>Mech_CentipedeBurner</li>
                </pawnKinds>
            </li>
        </comps>
        <building>
            <ai_combatDangerous>false</ai_combatDangerous>
        </building>
        <dropPodFaller>DropPodIncomingMechanoidSoft</dropPodFaller>
        <dropPodActive>ActiveDropPodMechanoid</dropPodActive>
    </ThingDef>
    <ThingDef ParentName="VGE_MechStructureBase">
        <defName>VGE_MechanoidTempShield</defName>
        <label>mechanoid temp shield</label>
        <description>A compact defense unit that projects a localized shield around itself. The barrier activates only for a short time before collapsing, after which the device must cool down before it can deploy again.</description>
        <drawerType>MapMeshAndRealTime</drawerType>
        <drawOffscreen>true</drawOffscreen>
        <tickerType>Normal</tickerType>
        <graphicData>
            <texPath>Things/Structures/MechanoidStructures/MechanoidTempShield</texPath>
            <graphicClass>Graphic_Single</graphicClass>
            <drawSize>(1,1)</drawSize>
        </graphicData>
        <statBases>
            <MaxHitPoints>100</MaxHitPoints>
            <Beauty>-4</Beauty>
            <Flammability>0</Flammability>
        </statBases>
        <size>(1,1)</size>
        <rotatable>false</rotatable>
        <passability>PassThroughOnly</passability>
        <pathCost>20</pathCost>
        <fillPercent>0.4</fillPercent>
        <killedLeavings>
            <GravlitePanel>15</GravlitePanel>
            <ComponentSpacer>2</ComponentSpacer>
        </killedLeavings>
        <specialDisplayRadius>24.9</specialDisplayRadius>
        <comps>
            <li Class="VanillaGravshipExpanded.CompProperties_MechanoidTempShield">
                <activeDuration>5000</activeDuration>
                <radius>24.9</radius>
                <interceptGroundProjectiles>true</interceptGroundProjectiles>
                <interceptAirProjectiles>true</interceptAirProjectiles>
                <color>(0.4, 0.4, 0.4)</color>
                <reactivateEffect>BulletShieldGenerator_Reactivate</reactivateEffect>
                <activeSound>BulletShield_Ambience</activeSound>
                <hitPoints>500</hitPoints>
                <hitPointsRestoreInstantlyAfterCharge>true</hitPointsRestoreInstantlyAfterCharge>
                <startWithMaxHitPoints>false</startWithMaxHitPoints>
                <chargeDurationTicks>10000</chargeDurationTicks>
                <minIdleAlpha>0.2</minIdleAlpha>
                <drawWithNoSelection>True</drawWithNoSelection>
                <alwaysShowHitpointsGizmo>true</alwaysShowHitpointsGizmo>
            </li>
        </comps>
        <building>
            <ai_combatDangerous>false</ai_combatDangerous>
        </building>
    </ThingDef>

    <ThingDef ParentName="VGE_MechStructureBase">
        <defName>VGE_MechanoidAstrofuelNode</defName>
        <label>astrofuel node</label>
        <description>A compact fuel reservoir integrated into mechanoid platforms. It stores refined astrofuel for their systems, but when damaged it is highly unstable and prone to violent explosions.</description>
        <tickerType>Normal</tickerType>
        <graphicData>
            <texPath>Things/Structures/MechanoidStructures/MechanoidAstrofuelNode</texPath>
            <graphicClass>Graphic_Single</graphicClass>
            <drawSize>(2,2)</drawSize>
        </graphicData>
        <statBases>
            <MaxHitPoints>150</MaxHitPoints>
            <Beauty>-10</Beauty>
            <Flammability>0</Flammability>
            <WorkToBuild>1000</WorkToBuild>
        </statBases>
        <size>(2,2)</size>
        <rotatable>false</rotatable>
        <passability>PassThroughOnly</passability>
        <pathCost>20</pathCost>
        <fillPercent>0.4</fillPercent>
        <costList>
            <Steel>30</Steel>
            <VGE_Astrofuel>45</VGE_Astrofuel>
        </costList>
        <resourcesFractionWhenDeconstructed>1</resourcesFractionWhenDeconstructed>
        <building>
            <ai_combatDangerous>false</ai_combatDangerous>
            <claimable>false</claimable>
            <deconstructible>true</deconstructible>
        </building>
        <constructionSkillPrerequisite>0</constructionSkillPrerequisite>
        <researchPrerequisites Inherit="False" />
        <comps>
            <li Class="CompProperties_Explosive">
                <explosiveRadius>8.9</explosiveRadius>
                <explosiveDamageType>VGE_AstrofireDamage</explosiveDamageType>
                <destroyThingOnExplosionSize>2</destroyThingOnExplosionSize>
                <startWickHitPointsPercent>0.2</startWickHitPointsPercent>
                <preExplosionSpawnThingDef>VGE_Filth_Astrofuel</preExplosionSpawnThingDef>
                <wickTicks>70~150</wickTicks>
            </li>
        </comps>
    </ThingDef>
</Defs>